<div [formGroup]="otherDetailsForm">
  <div class="panel-body">
    <div
      class="col-xs-2 col-sm-2 m-t-15"
      style="padding-top: 7px; margin-left: -18px"
    >
      <mat-checkbox
        checked="checked"
        formControlName="checked"
        (change)="checkMandatoryIsRequired($event)"
      >
        <p>{{ currentLanguageSet?.deactivateMandatoryFields }}</p>
      </mat-checkbox>
    </div>
  </div>
  <div class="panel-body">
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.fatherName
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            allowText="alphaspace"
            formControlName="fatherName"
            maxlength="50"
            [required]="isFatherRequired"
          />
          <mat-error
            *ngIf="otherDetailsForm.controls['fatherName'].errors?.['required']"
          >
            {{
              currentLanguageSet?.benDetailsAlert?.fatherNameMandatory
            }}</mat-error
          >
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.motherName
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            allowText="alphaspace"
            formControlName="motherName"
            maxlength="50"
          />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.emailID
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            validateEmail
            formControlName="emailID"
          />
          <mat-error *ngIf="!otherDetailsForm.controls['emailID'].valid">{{
            currentLanguageSet?.invalidEmail
          }}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="select-container">
          <mat-form-field [style.width]="'100%'">
            <mat-label class="mat-label-text">{{
              currentLanguageSet?.ro?.otherInfo?.community
            }}</mat-label>
            <mat-select
              class="p-t-12"
              [style.width]="'100%'"
              formControlName="community"
              [required]="isCommunityRequired"
              (selectionChange)="onCommunityChanged()"
            >
              <mat-option
                *ngFor="let community of masterData?.communityMaster"
                [value]="community.communityID"
                >{{ community.communityType }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.bankName
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.bankName }}"
            allowText="alphaspace"
            maxLength="100"
            formControlName="bankName"
          />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.branchName
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.branchName }}"
            allowText="alphanumericspace"
            maxLength="100"
            formControlName="branchName"
          />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.accountNo
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            allowText="number"
            maxLength="20"
            formControlName="accountNo"
          />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.ro?.otherInfo?.ifscCode
          }}</mat-label>
          <input
            autocomplete="off"
            matInput
            maxLength="15"
            allowText="alphanumeric"
            formControlName="ifscCode"
          />
        </mat-form-field>
      </div>
      <div class="clearfix"></div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="select-container">
          <mat-form-field [style.width]="'100%'">
            <mat-label class="mat-label-text">{{
              currentLanguageSet?.ro?.otherInfo?.religion
            }}</mat-label>
            <mat-select
              class="p-t-12"
              [style.width]="'100%'"
              formControlName="religion"
              (selectionChange)="getReligionName()"
            >
              <mat-option
                *ngFor="let religion of masterData?.religionMaster"
                [value]="religion.religionID"
                >{{ religion.religionType | titlecase }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div
        *ngIf="otherDetailsForm.value.religion === '7'"
        class="col-xs-12 col-sm-6 col-md-3 col-lg-3"
      >
        <div class="select-container">
          <mat-form-field [style.width]="'100%'">
            <mat-label class="mat-label-text">{{
              currentLanguageSet?.ro?.otherInfo?.otherReligion
            }}</mat-label>
            <input
              autocomplete="off"
              matInput
              allowText="alphaspace"
              formControlName="religionOther"
              maxlength="50"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field
          [style.width]="'100%'"
          class="fieldStyleDisabled"
          myHealthId
        >
          <mat-label class="mat-label-text">{{
            currentLanguageSet?.aBHA
          }}</mat-label>
          <input
            autocomplete="off"
            readonly
            matInput
            placeholder="{{ currentLanguageSet?.aBHA }}"
            formControlName="healthId"
            minlength="4"
            maxlength="32"
            [class.change]="disableGenerateOTP"
          />
        </mat-form-field>
      </div>

      <!-- <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="select-container">
          <md-select
            class="p-t-12"
            [style.width]="'100%'"
            placeholder="{{currentLanguageSet?.aBHAGenerationMode}}"
            formControlName="healthIdMode"
            [disabled]="disableGenerateOTP"
          >
          <md-option value="AADHAR">Aadhar</md-option>
          </md-select>
        </div>
      </div> -->

      <span class="clearfix"></span>
      <!-- NEW ID DETAILS for BENEFICIARY -->
      <div class="row">
        <section
          class="col-xs-12 col-sm-12 col-md-12 col-lg-5 mtop20"
          formArrayName="govID"
          style="margin-left: 2%"
        >
          <!-- Gov IDs-->
          <div
            class="col-xs-10 col-sm-10"
            *ngFor="
              let id of getGovIDControls();
              let i = index;
              let isLast = last
            "
            class="row"
          >
            <ng-container [formGroupName]="i">
              <mat-form-field [style.width]="'40%'" style="line-height: unset">
                <mat-label class="mat-label-text">{{
                  currentLanguageSet?.ro?.otherInfo?.govtIDType
                }}</mat-label>
                <mat-select
                  (selectionChange)="filtergovIDs(id.value.type, i)"
                  formControlName="type"
                  [required]="isGidRequired"
                  style="line-height: unset"
                  placeholder="{{
                    currentLanguageSet?.ro?.otherInfo?.govtIDType
                  }}"
                >
                  <mat-option
                    *ngFor="let govIDType of govIDMaster[i]?.govIdEntityMaster"
                    [value]="govIDType.govtIdentityTypeID"
                    >{{ govIDType.identityType }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field
                id="govtID"
                [style.width]="'40%'"
                style="line-height: unset; margin-left: 15px"
                class="mleft15"
              >
                <mat-label class="mat-label-text">{{
                  currentLanguageSet?.ro?.otherInfo?.govtIDNumber
                }}</mat-label>
                <input
                  autocomplete="off"
                  matInput
                  placeholder="{{
                    currentLanguageSet?.ro?.otherInfo?.govtIDNumber
                  }}"
                  [pattern]="
                    otherDetailsForm.controls['govID'].value[i].pattern
                  "
                  allow="otherDetailsForm.controls['govID'].value[i].allow"
                  formControlName="idValue"
                  [minlength]="
                    otherDetailsForm.controls['govID'].value[i].minLength
                  "
                  [maxlength]="
                    otherDetailsForm.controls['govID'].value[i].maxLength || 20
                  "
                  [readonly]="
                    otherDetailsForm.controls['govID'].value[i].type === null
                  "
                  [required]="
                    otherDetailsForm.controls['govID'].value[i].type !== null
                  "
                  (blur)="
                    checkPattern(i, otherDetailsForm.controls['govID'].value[i])
                  "
                />
              </mat-form-field>
              <button
                md-mini-fab
                *ngIf="
                  otherDetailsForm.get('govID')?.value.length > 1 ||
                  otherDetailsForm.controls['govID']?.value[i].type
                "
                color="warn"
                class="mat_warn_circle"
                (click)="removeID(1, i)"
              >
                <mat-icon
                  class="md-18"
                  matTooltip="{{ currentLanguageSet?.removeID }}"
                  >close</mat-icon
                >
              </button>
              <span *ngIf="i < govLength - 1">
                <button
                  mat-mini-fab
                  color="primary"
                  *ngIf="isLast"
                  [disabled]="
                    !otherDetailsForm.controls['govID'].value[i].idValue
                  "
                  (click)="addID(1, i)"
                  class="button-overall-disabled"
                >
                  <mat-icon
                    class="md-18"
                    matTooltip="{{ currentLanguageSet?.addID }}"
                    >add</mat-icon
                  >
                </button>
              </span>
              <div style="float: right; width: 55%">
                <mat-error
                  class="govid-msg"
                  *ngIf="
                    id.value.type === 3 &&
                    (otherDetailsForm.get('govID')?.value[i]?.idValue?.length <
                      otherDetailsForm.get('govID')?.value[i]?.minLength ||
                      otherDetailsForm.get('govID')?.value[i]?.idValue?.invalid)
                  "
                >
                  {{
                    otherDetailsForm.get("govID")?.value[i]?.error
                  }}</mat-error
                >
                <mat-error
                  class="govid-msg"
                  *ngIf="
                    id.value.type !== 3 &&
                    (otherDetailsForm.get('govID')?.value[i]?.idValue?.length <
                      otherDetailsForm.get('govID')?.value[i]?.minLength ||
                      otherDetailsForm.get('govID')?.value[i]?.idValue?.invalid)
                  "
                >
                  {{
                    otherDetailsForm.get("govID")?.value[i]?.error
                  }}</mat-error
                >
              </div>
            </ng-container>
          </div>
        </section>

        <section
          class="col-xs-12 col-sm-12 col-md-12 col-lg-5 mtop20"
          formArrayName="otherGovID"
          style="margin-left: 2%"
        >
          <!-- Other Gov IDs-->
          <section
            *ngFor="
              let id of getOtherGovIDControls();
              let i = index;
              let isLast = last
            "
            class="row"
          >
            <ng-container [formGroupName]="i">
              <mat-form-field>
                <mat-label>
                  {{ currentLanguageSet?.ro?.otherInfo?.govtHealthProgramType }}
                </mat-label>
                <mat-select
                  class="p-t-12"
                  [style.width]="'100%'"
                  formControlName="type"
                  (selectionChange)="filterOtherGovIDs(id.value.type, i)"
                  style="line-height: unset"
                  placeholder="{{
                    currentLanguageSet?.ro?.otherInfo?.govtHealthProgramType
                  }}"
                >
                  <mat-option
                    *ngFor="
                      let govIDType of otherGovIDMaster[i]
                        ?.otherGovIdEntityMaster
                    "
                    [value]="govIDType.govtIdentityTypeID"
                    >{{ govIDType.identityType }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field
                id="govtID"
                [style.width]="'45%'"
                style="line-height: unset"
                class="mleft15"
              >
                <mat-label class="mat-label-text">
                  {{
                    currentLanguageSet?.ro?.otherInfo?.govtHealthProgramIDNumber
                  }}</mat-label
                >
                <input
                  autocomplete="off"
                  matInput
                  [readonly]="
                    otherDetailsForm.controls['otherGovID'].value[i].type ===
                    null
                  "
                  formControlName="idValue"
                  [required]="
                    otherDetailsForm.controls['otherGovID'].value[i].type !==
                    null
                  "
                  maxlength="20"
                />
              </mat-form-field>
              <button
                style="text-align: center"
                mat-mini-fab
                color="warn"
                *ngIf="
                  otherDetailsForm.get('otherGovID')?.value[i]?.idValue
                    ?.length > 1 ||
                  otherDetailsForm.controls['otherGovID'].value[i].type
                "
                (click)="removeID(0, i)"
              >
                <mat-icon
                  class="md-18"
                  aria-label="Example icon-button with a heart icon"
                  >close</mat-icon
                >
              </button>
              <span *ngIf="i < otherGovLength - 1">
                <button
                  mat-mini-fab
                  style="margin-left: 3px; text-align: center"
                  color="primary"
                  class="mat_blue_circle"
                  *ngIf="isLast"
                  [disabled]="
                    !otherDetailsForm.controls['otherGovID'].value[i].idValue
                  "
                  (click)="addID(0, i)"
                  class="button-overall-disabled"
                >
                  <mat-icon
                    class="md-18"
                    aria-label="Example icon-button with a heart icon"
                    >add</mat-icon
                  >
                </button>
              </span>
            </ng-container>
          </section>
        </section>
      </div>
      <!--ENDS-> NEW ID DETAILS for BENEFICIARY -->
    </div>
  </div>
</div>
