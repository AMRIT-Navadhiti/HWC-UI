<!-- {{ patientHistoryForm.value | json}} -->
<mat-accordion>
  <div *ngIf="visitCategory !== 'NCD screening'">
    <mat-expansion-panel expanded="true">
      <mat-expansion-panel-header>
        <h5>{{ currentLanguageSet?.historyData?.ancHistory?.pastHistory }}</h5>
      </mat-expansion-panel-header>
      <general-past-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [pastHistory]="patientHistoryForm.controls['pastHistory']"
      ></general-past-history>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory
              ?.combordityANC_OPD_NCD_PNC?.comorbidityConditions
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-comorbidity-concurrent-conditions
        [mode]="mode"
        [visitCategory]="visitCategory"
        [comorbidityHistory]="patientHistoryForm.controls['comorbidityHistory']"
      ></general-comorbidity-concurrent-conditions>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory
              ?.medicationANC_OPD_NCD_PNC?.medicationHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-medication-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [medicationHistory]="patientHistoryForm.controls['medicationHistory']"
      ></general-medication-history>
    </mat-expansion-panel>

    <mat-expansion-panel *ngIf="beneficiary && beneficiary.ageVal >= 13">
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory
              ?.personalHistoryANC_OPD_NCD_PNC?.personalHistoryData
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-personal-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [personalHistory]="patientHistoryForm.controls['personalHistory']"
      ></general-personal-history>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory
              ?.familyHistoryDataANC_OPD_NCD_PNC?.familyHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-family-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [familyHistory]="patientHistoryForm.controls['familyHistory']"
      ></general-family-history>
    </mat-expansion-panel>

    <mat-expansion-panel
      *ngIf="
        beneficiary &&
        beneficiary.ageVal >= 8 &&
        beneficiary.genderName !== 'Male'
      "
    >
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory?.menstrualHistoryANC
              ?.menstrualHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-menstrual-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [menstrualHistory]="patientHistoryForm.controls['menstrualHistory']"
      ></general-menstrual-history>
    </mat-expansion-panel>

    <mat-expansion-panel *ngIf="beneficiaryAge <= 1">
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.opd_NCD_PNCHistory?.perinatal_OPD
              ?.perinatalHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-perinatal-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [perinatalHistory]="patientHistoryForm.controls['perinatalHistory']"
      ></general-perinatal-history>
    </mat-expansion-panel>

    <mat-expansion-panel *ngIf="showObstetricHistory">
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.opd_NCD_PNCHistory?.obstetric
              ?.pastObstetricHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-past-obsteric-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [pastObstericHistory]="
          patientHistoryForm.controls['pastObstericHistory']
        "
      ></general-past-obsteric-history>
    </mat-expansion-panel>

    <mat-expansion-panel
      *ngIf="
        beneficiaryAge <= 16 && visitCategory?.toLowerCase() === 'general opd'
      "
    >
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.opd_NCD_PNCHistory?.immunization
              ?.ImmunizationHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-immunization-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [immunizationHistory]="
          patientHistoryForm.controls['immunizationHistory']
        "
      ></general-immunization-history>
    </mat-expansion-panel>

    <mat-expansion-panel
      *ngIf="
        beneficiaryAge <= 16 && visitCategory?.toLowerCase() === 'general opd'
      "
    >
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.opd_NCD_PNCHistory?.otherVaccine
              ?.otherVaccines
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-other-vaccines
        [mode]="mode"
        [visitCategory]="visitCategory"
        [otherVaccines]="patientHistoryForm.controls['otherVaccines']"
      ></general-other-vaccines>
    </mat-expansion-panel>

    <mat-expansion-panel *ngIf="beneficiaryAge <= 1">
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.opd_NCD_PNCHistory?.feeding
              ?.feedingHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-feeding-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [feedingHistory]="patientHistoryForm.controls['feedingHistory']"
      ></general-feeding-history>
    </mat-expansion-panel>

    <mat-expansion-panel *ngIf="beneficiaryAge <= 11">
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.opd_NCD_PNCHistory?.development
              ?.developmentHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-development-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [developmentHistory]="patientHistoryForm.controls['developmentHistory']"
      ></general-development-history>
    </mat-expansion-panel>
  </div>
  <div *ngIf="visitCategory === 'NCD screening'">
    <mat-expansion-panel [expanded]="showHistory ? true : false">
      <mat-expansion-panel-header *ngIf="showHistory">
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory
              ?.familyHistoryDataANC_OPD_NCD_PNC?.familyHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <app-family-history-ncdscreening
        [mode]="mode"
        [visitCategory]="visitCategory"
        [familyHistory]="patientHistoryForm.controls['familyHistory']"
      ></app-family-history-ncdscreening>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header *ngIf="showHistory">
        <h5>
          {{
            currentLanguageSet?.historyData?.ncdPhysicalActivityHistory
              ?.physicalActivityHistory
          }}
        </h5>
      </mat-expansion-panel-header>
      <app-physical-activity-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [physicalActivityHistory]="
          patientHistoryForm.controls['physicalActivityHistory']
        "
      ></app-physical-activity-history>
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="showHistory ? false : true">
      <mat-expansion-panel-header>
        <h5>
          {{
            currentLanguageSet?.historyData?.ancHistory
              ?.personalHistoryANC_OPD_NCD_PNC?.personalHistoryData
          }}
        </h5>
      </mat-expansion-panel-header>
      <general-personal-history
        [mode]="mode"
        [visitCategory]="visitCategory"
        [personalHistory]="patientHistoryForm.controls['personalHistory']"
      ></general-personal-history>
    </mat-expansion-panel>
  </div>
</mat-accordion>
